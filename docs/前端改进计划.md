# 前端界面改进计划

## 当前状态评估

### 已完成
- ✅ 工具栏优化（带文字标签）
- ✅ 可解释性分析模态框
- ✅ 瘤周环显示
- ✅ ROI放大功能
- ✅ 中英文切换
- ✅ 高级筛选器

### 需要改进的区域

---

## 1. 患者列表 (PatientList)

### 问题
- 信息密度高，但视觉层次不够清晰
- 缺少快速预览功能
- 分组展开/折叠状态不直观

### 改进方案

```
┌─────────────────────────────────┐
│ 🔍 搜索患者...                   │
├─────────────────────────────────┤
│ ▼ Patient 1424711 [NAC] [CLIN]  │
│   ├─ 📷 (1) T3 ●●●○ 0.85       │  ← 缩略图 + 置信度
│   └─ 📷 (2) T3 ●●●○ 0.82       │
├─────────────────────────────────┤
│ ▶ Patient 1444273 [SURG]        │
└─────────────────────────────────┘
```

**具体改进：**
1. 添加缩略图预览（悬停显示）
2. 显示 AI 预测的 T 分期和置信度
3. 用颜色编码风险等级（红/黄/绿）
4. 优化分组头部样式

---

## 2. 诊断面板 (DiagnosisPanel)

### 问题
- 信息过多，重点不突出
- 展开模式下内容冗余
- 缺少与可解释性分析的联动

### 改进方案

**紧凑模式：**
```
┌─────────────────────────────────┐
│ [诊断] [临床]              [⛶] │
├─────────────────────────────────┤
│    T3N1    置信度 78%           │
│   ████████░░ 高风险             │
├─────────────────────────────────┤
│ • Ki-67 高表达 (45%)            │
│ • 边界完整性一般 (SII: 0.32)    │  ← 联动可解释性分析
│ • 建议：进一步检查              │
└─────────────────────────────────┘
```

**具体改进：**
1. 整合可解释性分析结果到诊断面板
2. 简化概率条形图
3. 添加"关键发现"摘要区域
4. 优化展开模式布局

---

## 3. 概念推理 (ConceptReasoning)

### 问题
- 滑块太多，占用空间大
- 缺少快速重置单个滑块的功能
- 与实际临床数据的对比不直观

### 改进方案

```
┌─────────────────────────────────┐
│ 概念特征              [重置全部] │
├─────────────────────────────────┤
│ Ki-67  ████████░░ 45% [↺]       │  ← 单个重置
│        实际: 42% ✓              │  ← 显示实际值对比
│                                 │
│ CPS    █████░░░░░ 28% [↺]       │
│        实际: N/A                │
├─────────────────────────────────┤
│ [折叠更多...]                   │  ← 可折叠次要特征
└─────────────────────────────────┘
```

**具体改进：**
1. 分组显示（主要特征 / 次要特征）
2. 显示实际临床值对比
3. 单个滑块重置按钮
4. 可折叠的次要特征区域

---

## 4. 图像查看器 (UltrasoundViewer)

### 问题
- 测量工具交互不够流畅
- 缺少图像对比功能（同一患者多张图）
- 标注信息显示不够丰富

### 改进方案

**多图对比模式：**
```
┌──────────────────────────────────────────┐
│ [原图] [分割] [对比] | [检测] [瘤周] ROI │
├────────────────┬─────────────────────────┤
│                │                         │
│   Image (1)    │      Image (2)          │  ← 同一患者多图对比
│                │                         │
├────────────────┴─────────────────────────┤
│ ◀ 1/3 ▶  [同步缩放] [独立缩放]           │
└──────────────────────────────────────────┘
```

**具体改进：**
1. 添加多图浏览模式（同一患者）
2. 同步/独立缩放控制
3. 改进测量工具（自动计算面积）
4. 显示更多标注元数据

---

## 5. 头部导航 (Header)

### 问题
- 功能按钮较多，小屏幕适配不好
- 队列切换不够明显

### 改进方案

```
┌──────────────────────────────────────────────────────────────┐
│ [Logo] 胃癌T分期诊断系统                                      │
│                                                              │
│ [2025 ▼] [ORIGINAL ▼]  |  [统计] [设置] [🌐] [👤]            │
└──────────────────────────────────────────────────────────────┘
```

**具体改进：**
1. 使用下拉菜单代替多个按钮
2. 响应式设计（小屏幕折叠）
3. 添加设置面板入口

---

## 6. 可解释性分析 (ExplainableAnalysis)

### 问题
- 当前是独立模态框，与主界面割裂
- 分析结果没有持久化

### 改进方案

**集成到主界面：**
```
┌─────────────────────────────────────────────────────────────┐
│                    图像查看器                                │
│  ┌───────────────────────────────────────────────────────┐  │
│  │                                                       │  │
│  │              [风险热力图叠加]                          │  │
│  │                                                       │  │
│  └───────────────────────────────────────────────────────┘  │
│  [SII: 0.32] [BCI: 0.45] [CRI: 0.28] | 预测: T3 (78%)       │
└─────────────────────────────────────────────────────────────┘
```

**具体改进：**
1. 分析结果显示在图像下方
2. 风险热力图可叠加到原图
3. 缓存分析结果，避免重复计算
4. 添加"对比模式"（AI预测 vs 实际）

---

## 7. 全局改进

### 7.1 加载状态优化
- 骨架屏更精细
- 渐进式加载（先显示列表，再加载图像）

### 7.2 键盘快捷键
```
1-4: 切换视图模式
D: 显示/隐藏检测框
R: 显示/隐藏瘤周环
M: 测量工具
F: 全屏
←/→: 上一个/下一个患者
Space: 运行分析
```

### 7.3 主题和可访问性
- 高对比度模式
- 字体大小调节
- 色盲友好配色

### 7.4 性能优化
- 图像懒加载
- 虚拟滚动（患者列表）
- 分析结果缓存

---

## 优先级排序

| 优先级 | 改进项 | 预计工时 | 影响 |
|--------|--------|----------|------|
| 🔴 高 | 诊断面板整合可解释性结果 | 2h | 核心体验 |
| 🔴 高 | 患者列表添加 T 分期预览 | 1h | 快速筛选 |
| 🟡 中 | 概念推理分组和对比 | 2h | 易用性 |
| 🟡 中 | 多图对比模式 | 3h | 诊断效率 |
| 🟢 低 | 键盘快捷键 | 1h | 效率提升 |
| 🟢 低 | 头部响应式设计 | 1h | 移动端 |

---

## 下一步行动

1. **立即可做**：诊断面板显示 SII/BCI/CRI 指标
2. **本周完成**：患者列表添加风险等级颜色编码
3. **下周计划**：多图对比模式

